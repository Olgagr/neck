{"version":3,"file":"lib/neck.js","sources":["wrappers/prefix.js","src/neck.coffee","src/modules/controller.coffee","src/modules/helper.coffee","src/modules/router.coffee","src/modules/app.coffee","src/helpers/attr.coffee","src/helpers/bind.coffee","src/helpers/class.coffee","src/helpers/collection.coffee","src/helpers/element.coffee","src/helpers/events.coffee","src/helpers/hide.coffee","src/helpers/href.coffee","src/helpers/init.coffee","src/helpers/list.coffee","src/helpers/neck.coffee","src/helpers/route.coffee","src/helpers/show.coffee","src/helpers/template.coffee","src/helpers/value.coffee","src/helpers/yield.coffee","wrappers/suffix.js"],"names":[],"mappings":"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","sourcesContent":["// Opening wrapper \n// Taken from backbonejs library\n(function(root, factory) {\n\n  // Set up Neck appropriately for the environment. Start with AMD.\n  if (typeof define === 'function' && define.amd) {\n    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {\n      // Export global even in AMD case in case this script is loaded with\n      // others that may still expect a global Neck.\n      root.Neck = factory(root, exports, _, $);\n    });\n\n  // Next for Node.js or CommonJS. jQuery may not be needed as a module.\n  } else if (typeof exports !== 'undefined') {\n    var _ = require('underscore');\n    factory(root, exports, _);\n\n  // Finally, as a browser global.\n  } else {\n    root.Neck = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));\n  }\n\n}(this, function(root, Neck, _, $) {\n","# Add \"ui-hide\" class\n$('''\n  <style media=\"screen\">\n    .ui-hide { display: none !important }\n  </style>\n  ''').appendTo $('head')\n\nNeck.Tools =\n  dashToCamel: (str)-> str.replace /\\W+(.)/g, (x, chr)-> chr.toUpperCase()\n  camelToDash: (str)-> str.replace(/\\W+/g, '-').replace(/([a-z\\d])([A-Z])/g, '$1-$2')\n\n# Dependency injectors container\nNeck.DI = {}\n\n# DI searching on global scope given variables\nNeck.DI.globals =\n  load: (route, options)-> \n    try\n      if destiny = eval(route)\n        return destiny\n      else\n        if options.type isnt 'template'\n          return throw \"No defined '#{route}' object in global scope\"\n    catch\n      if options.type isnt 'template'\n        return throw \"No defined '#{route}' object in global scope\"\n\n    route\n\n# DI working with commonjs require module wrapper\nNeck.DI.commonjs =\n  controllerPrefix: 'controllers'\n  helperPrefix: 'helpers'\n  templatePrefix: 'templates'\n\n  _routePath: /^([a-zA-Z$_\\.]+\\/?)+$/i\n\n  load: (route, options)-> \n    if route.match @_routePath\n      try\n        return require (if options.type then @[options.type + 'Prefix'] + \"/\" else '') + route\n      catch\n        if options.type isnt 'template'\n          return throw \"No defined '#{route}' object for CommonJS dependency injection\"\n\n    route","class Neck.Controller extends Backbone.View  \n  divWrapper: true\n  template: false\n  parseSelf: true\n\n  injector: Neck.DI.commonjs\n\n  constructor: (opts)->\n    super\n\n    # Create scope inherit or new\n    scope = if @parent = opts?.parent then Object.create(@parent.scope) else _context: @\n    @scope = _.extend scope, @scope, _resolves: {}\n\n    # Listen to parent events\n    if @parent\n      @listenTo @parent, 'render:clear', @clear\n      @listenTo @parent, 'remove:before', @remove\n\n      # Inherit injector\n      @injector = @parent.injector\n      \n    if opts.template and not @template\n      @template = opts.template\n\n    if @template is true\n      @template = @$el.html()\n      @$el.empty()\n\n    @params = opts.params or {}\n\n  remove: =>\n    @trigger 'remove:before'\n\n    # Clear references\n    @parent = undefined\n    @scope = undefined\n\n    # Trigger Backbone remove \n    super\n\n    @trigger 'remove:after'\n\n  clear: =>\n    @off()\n    @stopListening()\n    @trigger 'render:clear'\n\n  render: ->\n    @trigger 'render:clear' # Remove childs listings\n    @trigger 'render:before' \n\n    if @template\n      unless typeof @template is 'function'\n        if typeof (template = @injector.load(@template, type: 'template')) is 'function'\n          template = template @scope\n      else\n        template = template @scope\n          \n      if @divWrapper\n        @$el.html template\n      else\n        @setElement $(template)\n    \n    @_parseNode el for el in (if @parseSelf then @$el else @$el.children())\n\n    @trigger 'render:after'\n    @\n\n  _parseNode: (node)->\n    if node?.attributes\n      el = null\n      for attribute in node.attributes\n        if attribute.nodeName?.substr(0, 3) is \"ui-\"\n          el or= $(node)\n          name = Neck.Tools.dashToCamel attribute.nodeName.substr(3)\n          helper = new (Neck.Helper[name] or @injector.load(name, type: 'helper'))(el: el, parent: @, mainAttr: attribute.value)\n          stop = true if helper.template isnt false\n    \n    @_parseNode child for child in node.childNodes unless stop or not node\n    undefined\n\n  _watch: (key, callback, context = @)->\n    shortKey = key.split('.')[0]\n\n    if @scope._resolves[key]\n      for resolve in @scope._resolves[key]\n        resolve.controller._watch resolve.key, callback, context\n      return\n    else\n      if @scope.hasOwnProperty(shortKey)\n        if Object.getOwnPropertyDescriptor(@scope, shortKey)?.get\n          return context.listenTo @, \"refresh:#{key}\", callback\n      else\n        controller = @\n        while controller = controller.parent\n          if controller.scope.hasOwnProperty shortKey\n            return controller._watch key, callback, context\n        undefined\n\n    # Create get/set property for shortKey\n    val = @scope[shortKey]\n\n    if val instanceof Backbone.Model or val instanceof Backbone.Collection\n      @listenTo val, \"change\", => @apply shortKey\n\n    Object.defineProperty @scope, shortKey, \n      enumerable: true\n      get: -> val\n      set: (newVal)=>\n        if val instanceof Backbone.Model or val instanceof Backbone.Collection\n          @stopListening val\n        if newVal instanceof Backbone.Model or val instanceof Backbone.Collection  \n          @listenTo newVal, \"change\", => @apply shortKey\n          \n        val = newVal\n        @apply shortKey\n  \n    context.listenTo @, \"refresh:#{key}\", callback\n\n  watch: (keys, callback, initCall = true)->\n    keys = keys.split(' ')\n    call = => callback.apply @, _.map keys, (k)=> \n      (new Function(\"__scope\", \"try { with (__scope) { return #{k}; } } catch(e) { return undefined; }\"))(@scope, k)\n\n    @_watch key, call for key in keys\n    call() if initCall\n\n  apply: (key)->\n    if @scope._resolves[key]\n      for resolve in @scope._resolves[key]\n        resolve.controller.trigger \"refresh:#{resolve.key}\"\n      undefined\n    else\n      controller = @\n      while controller = controller.parent\n        if controller.scope.hasOwnProperty(key)\n          return controller.trigger \"refresh:#{key}\"\n\n      @trigger \"refresh:#{key}\"\n\n  route: (controller, options = {yield: 'main'})->\n    unless target = @._yieldList[options.yield]\n      throw \"No yield '#{options.yield}' for route in yields chain\"\n   \n    target.append controller, options.params, options.refresh, options.replace\n\n  navigate: (url, params, options = {trigger: true})->\n    Neck.Router.prototype.navigate url + (if params then '?' + $.param(params) else ''), options","class Neck.Helper extends Neck.Controller\n  REGEXPS:\n    TEXTS: /\\'[^\\']+\\'/g\n    TEXTS_HASHED: /###/g\n    FUNCTION: /\\(/\n    PROPERTIES: /([a-zA-Z$_\\@][^\\ \\[\\]\\:\\{\\}\\)]*)/g\n    RESERVED_KEYWORDS: /(^|\\ )(true|false|undefined|null|NaN|window)($|\\.|\\ )/g\n  \n  parseSelf: false\n\n  constructor: (opts)->\n    super\n    @_setAccessor '_main', opts.mainAttr\n\n    if @attributes\n      for attr in @attributes\n        if value = @el.attributes[Neck.Tools.camelToDash(attr)]?.value\n          @_setAccessor attr, value\n\n  _parseValue: (s)->\n    s = s.trim()\n    texts = []\n    resolves = []\n\n    # Replace texts for recognition\n    s = s.replace @REGEXPS.TEXTS, (t)-> \n      texts.push t\n      \"###\"\n\n    # Find scope properties\n    s = s.replace @REGEXPS.PROPERTIES, (t)=>\n      unless t.substr(0, 1) is '@' \n        unless t.match @REGEXPS.RESERVED_KEYWORDS\n          resolves.push if t.match @REGEXPS.FUNCTION then t.split('.')[0] else t\n      else\n        t = '_context.' + t.substr(1)\n      t\n \n    # Unreplace texts\n    if texts.length\n      s = s.replace @REGEXPS.TEXTS_HASHED, -> texts.shift()\n\n    [s, _.uniq(resolves)]\n\n  _setAccessor: (key, value)->\n    strictValue = false\n    [value, resolves] = @_parseValue value\n\n    _getter = new Function \"__scope\", \"with (__scope) { __return = #{value} } return __return\"\n    _setter = new Function \"__scope, __newVal\", \"with (__scope) { return #{value} = __newVal; };\"\n\n    Object.defineProperty @scope, key, \n      enumerable: true\n      get: => \n        try\n          return value if strictValue\n          _getter.call window, @parent.scope\n        catch e\n          # console.warn \"Getting '#{value}': #{e.message}\"\n          undefined\n      set: (newVal)=>\n        try\n          _return = _setter.call window, @parent.scope, newVal\n        catch e\n          # console.warn \"Setting '#{value}': #{e.message}\"\n          strictValue = true\n          _return = value = newVal\n\n        @apply key\n        _return\n\n    @scope._resolves[key] = []\n    for resolve in resolves\n      controller = @\n      while controller = controller.parent\n        if controller.scope._resolves[resolve]\n          @scope._resolves[key] = _.union @scope._resolves[key], @parent.scope._resolves[resolve]\n          break\n        if controller.scope.hasOwnProperty(resolve.split('.')[0])\n          @_addResolver key, controller, resolve\n          break\n        else unless controller.parent\n          @_addResolver key, controller, resolve \n          \n    # Clear when empty\n    unless @scope._resolves[key].length\n      @scope._resolves[key] = undefined\n\n  _addResolver: (key, controller, resolve)->\n    @scope._resolves[key].push controller: controller, key: resolve\n\n    chain = resolve.split('.')\n    param = chain.pop()\n    obj = controller.scope\n    while objName = chain.shift()\n      obj[objName] = {} unless obj[objName]\n      obj = obj[objName]\n    obj[param] or= undefined # Predefined property if is not set already","class Neck.Router extends Backbone.Router\n\n  PARAM_REGEXP: /\\:(\\w+)/gi\n\n  constructor:(opts)->\n    super\n\n    unless @app = opts?.app\n      throw \"Neck.Router require connection with App Controller\"\n\n  route:(route, settings)->\n    # Mix values to proper structure\n    unless settings.yields\n      if typeof settings is 'object'\n        settings = yields: main: settings\n      else if typeof settings is 'string'\n        settings = yields: main: controller: settings\n      else\n        throw \"Route structure has to be object or controller name\"\n\n    myCallback = (args...)=>\n      query = {}\n      args.pop() if typeof (query = _.last(args)) is 'object'\n\n      if args.length and !_.isRegExp(route)\n        route.replace @PARAM_REGEXP, (all, name)->\n          query[name] = param if param = args.shift()\n\n      for yieldName, options of settings.yields\n        throw \"No '#{yieldName}' yield defined in App\" unless _yield = @app._yieldList?[yieldName]\n        return _yield.clear() if options is false\n        \n        _yield.append (options.controller or options), \n          _.extend({}, options.params, query),\n          options.refresh,\n          options.replace\n          \n      @app.scope._state = settings.state if settings.state\n\n    super(route, myCallback)","class Neck.App extends Neck.Controller\n\n  routes: false\n  history: pushState: true\n\n  constructor:(opts)->\n    super\n\n    if @routes\n      @router = new Neck.Router app: @, routes: @routes\n      if @history\n        @once 'render:after', => Backbone.history.start @history ","class Neck.Helper.attr extends Neck.Helper\n\n  constructor: ->\n    super\n    throw \"'ui-attr' attribute has to be object\" unless typeof @scope._main is 'object'\n\n    # IE9 bug-fix: Changing attributes array of node while iterating error\n    @listenToOnce @parent, 'render:after', ->\n      @watch '_main', (main)->\n        for key, value of main\n          if returnedValue = value\n            @$el.attr key, if returnedValue is true then key else returnedValue\n          else\n            @$el.removeAttr key\n        undefined","class Neck.Helper.bind extends Neck.Helper\n\n  NUMBER: /^[0-9]+((\\.|\\,)?[0-9]+)*$/\n\n  events:\n    \"keydown\" : \"update\"\n    \"change\"  : \"update\"\n    \"search\"  : \"update\"\n\n  isCheckbox: false\n\n  constructor: ->\n    super\n\n    if @$el.is(':checkbox')\n      @isCheckbox = true\n\n    @watch '_main', (value)->\n      unless @_updated\n        if @isCheckbox\n          @$el.prop 'checked', value\n        else\n          @$el.val value or ''\n      @_updated = false\n\n  calculateValue: (s)->\n    if s.match @NUMBER\n      Number s.replace(',','.')\n    else\n      s\n\n  update: ->\n    setTimeout =>\n      # Exit timeout when controller is already destroy\n      return unless @scope\n\n      @_updated = true\n      if @isCheckbox\n        @scope._main = if @$el.is(':checked') then 1 else 0\n      else\n        @scope._main = @calculateValue @$el.val()","class Neck.Helper.class extends Neck.Helper\n\n  constructor: ->\n    super\n\n    throw \"'ui-class' attribute has to be object\" unless typeof @scope._main is 'object'\n\n    # IE9 bug-fix: Changing attributes array of node while iterating error\n    @listenToOnce @parent, 'render:after', ->\n      @watch '_main', (main)->\n        for key, value of main\n          if value\n            @$el.addClass key\n          else\n            @$el.removeClass key\n        undefined","class Neck.Helper.collectionItem extends Neck.Controller\n  divWrapper: false\n\n  constructor: (opts)->\n    super\n\n    @model = opts.model\n    \n    # Set own property\n    Object.defineProperty @scope, opts.itemName,\n      enumerable: true\n      writable: true\n      configurable: true\n      value: opts.model\n\n    # For iterating number in view\n    @scope._index = opts.index\n    \n    if opts.externalTemplate\n      @listenTo @scope[opts.itemName], 'change', => \n        @$el.replaceWith @render().$el\n\nclass Neck.Helper.collection extends Neck.Helper\n  attributes: [\n    'collectionItem',\n    'collectionSort',\n    'collectionFilter',\n    'collectionView',\n    'collectionEmpty',\n    'collectionController'\n  ]\n\n  template: true\n  itemController: Neck.Helper.collectionItem\n\n  constructor: ->\n    super\n\n    unless (@scope._main is undefined) or @scope._main instanceof Backbone.Collection\n      throw \"Given object has to be instance of Backbone.Collection\"\n\n    @itemTemplate = @template\n    @itemTemplate = @scope.collectionView if @scope.collectionView\n    @template = @scope.collectionEmpty\n\n    if controller = @scope.collectionController\n      if typeof controller is 'string'\n        @itemController = @injector.load(controller, type: 'controller')\n      else\n        @itemController = controller\n    \n    @scope.collectionItem or= 'item'\n    @items = []\n    \n    @watch '_main', (collection)->\n      return if collection is @collection\n      @stopListening @collection if @collection\n\n      if @collection = collection\n        @listenTo @collection, \"add\", @addItem\n        @listenTo @collection, \"remove\", @removeItem\n        @listenTo @collection, \"sort\", @sortItems\n        @listenTo @collection, \"reset\", @resetItems\n\n      @resetItems()\n\n    @watch 'collectionSort', (sort)->\n      if sort\n        @collection.comparator = sort\n        @collection.sort()\n\n    @watch 'collectionFilter', (filter)->\n      if filter or filter is \"\"\n        filter = new RegExp filter, \"gi\"\n        for item in @items\n          if (item.model + \"\").match filter\n            item.$el.removeClass 'ui-hide'\n          else\n            item.$el.addClass 'ui-hide'\n        undefined\n\n  addItem: (model)=>\n    @$el.empty() unless @items.length\n\n    @items.push item = new @itemController(\n      template: @itemTemplate\n      externalTemplate: @scope.collectionView\n      parent: @parent\n      model: model\n      itemName: @scope.collectionItem\n      index: @items.length\n    )\n    @$el.append item.render().$el\n\n  removeItem: (model)=>\n    item = _.findWhere(@items, model: model)\n    @items.splice @items.indexOf(item), 1\n    item.remove()\n\n    unless @collection?.length\n      @renderEmpty()\n\n  sortItems: =>\n    for model in @collection.models\n      _.findWhere(@items, model: model).$el.appendTo @$el\n    undefined\n\n  resetItems: =>\n    item.remove() for item in @items\n    @items = []\n    @$el.empty()\n\n    if @collection?.length\n      @addItem(item) for item in @collection.models\n      undefined\n    else\n      @renderEmpty()\n\n  renderEmpty:->\n    @render() if @template","class Neck.Helper.element extends Neck.Helper\n\n  constructor: ->\n    super\n    throw \"'ui-element' attribute has to be string\" unless typeof @scope._main is 'string'\n\n    @parent?.scope[@scope._main] = @$el","### LIST OF EVENTS TO TRIGGER ###\n\nEventList = [\n  # Mouse events\n  \"click\", \"dblclick\"\n  \"mouseenter\", \"mouseleave\", \"mouseout\"\n  \"mouseover\", \"mousedown\", \"mouseup\"\n  \"drag\", \"dragstart\", \"dragenter\", \"dragleave\", \"dragover\", \"dragend\", \"drop\"\n  # General\n  \"load\"\n  \"focus\", \"focusin\", \"focusout\", \"select\", \"blur\"\n  \"submit\"\n  \"scroll\"\n  # Touch events\n  \"touchstart\", \"touchend\", \"touchmove\", \"touchenter\", \"touchleave\", \"touchcancel\"\n  # Keys events\n  \"keyup\", \"keydown\", \"keypress\"\n]\n\nclass EventHelper extends Neck.Helper\n  constructor: (opts)->\n    super\n    \n    if typeof @scope._main is 'function'\n      @scope._main.call @scope._context, opts.e\n\n    @apply '_main'\n\n    @off()\n    @stopListening()\n\n  _resolveKey: (scope, keyChain)->\n    keys = keyChain.split('.')\n    property = keys.pop()\n\n    while key = keys.shift()\n      scope = scope[key]\n\n    [scope, property]\n\n  apply: (key)->\n    if @scope?._resolves[key]\n      newResolves = []\n\n      # Check if key resolvers are 'self' appliers\n      for resolve, index in @scope._resolves[key]\n        [obj, key] = @_resolveKey resolve.controller.scope, resolve.key\n        unless Object.getOwnPropertyDescriptor(obj, key)?.get\n          newResolves.push resolve\n\n      @scope._resolves[key] = if newResolves.length then newResolves else undefined\n      super\n\nclass Event\n  template: false\n  \n  constructor: (options)->\n    # Anchor should have 'href' attribute\n    if options.el[0].tagName is 'A'\n      options.el.attr 'href', '#' unless options.el.attr 'href'\n\n    options.el.on @eventType, (e)=>\n      e.preventDefault()\n      options.e = e\n      new EventHelper options\n\nfor ev in EventList\n  helper = class ER extends Event\n  helper::eventType = ev\n  Neck.Helper[Neck.Tools.dashToCamel(\"event-#{ev}\")] = helper","class Neck.Helper.hide extends Neck.Helper\n\n  constructor: ->\n    super\n\n    @watch '_main', (value)->\n      if value\n        @$el.addClass 'ui-hide'\n      else\n        @$el.removeClass 'ui-hide'","class HrefHelper extends Neck.Helper\n  \n  constructor: (opts)->\n    super \n    \n    opts.e.preventDefault()\n    Neck.Router.prototype.navigate @scope._main, trigger: true\n\nclass Neck.Helper.href\n  template: false\n\n  constructor: (opts)->\n    # Add href for styling purposes\n    opts.el.attr 'href', '#'\n\n    opts.el.on 'click', (e)->\n      new HrefHelper _.extend opts, e: e","class Neck.Helper.init extends Neck.Helper\n\n  constructor: ->\n    super\n\n    if typeof @scope._main is 'function'\n      @scope._main.call @scope._context","class Neck.Helper.listItem extends Neck.Controller\n  divWrapper: false\n\n  constructor: (opts)->\n    super\n\n    @item = opts.item\n    \n    # Set own property\n    Object.defineProperty @scope, opts.itemName,\n      enumerable: true\n      writable: true\n      configurable: true\n      value: opts.item\n\n    # For iterating number in view\n    @scope._index = opts.index\n\nclass Neck.Helper.list extends Neck.Helper\n  attributes: [\n    'listItem',\n    'listSort',\n    'listFilter',\n    'listView',\n    'listEmpty',\n    'listController'\n  ]\n\n  template: true\n  itemController: Neck.Helper.listItem\n\n  constructor: ->\n    super\n\n    unless (@scope._main is undefined) or @scope._main instanceof Array\n      throw \"Given object has to be instance of Array\"\n\n    @itemTemplate = @template\n    @itemTemplate = @scope.listView if @scope.listView\n    @template = @scope.listEmpty\n\n    if controller = @scope.listController\n      if typeof controller is 'string'\n        @itemController = @injector.load(controller, type: 'controller')\n      else\n        @itemController = controller\n\n    @itemName or= 'item'\n    @items = []\n\n    @watch '_main', (@list)->\n      if @list\n        @resetItems()\n\n        @apply 'listSort' if @scope.listSort \n        @apply 'listFilter' if @scope.listFilter\n\n    @watch 'listSort', (sort)->\n      if sort\n        @list = _.sortBy @list, (i)-> sort(i)\n        for item in @list\n          _.findWhere(@items, item: item).$el.appendTo @$el\n        undefined\n\n    @watch 'listFilter', (filter)->\n      if filter or filter is \"\"\n        filter = new RegExp filter, \"gi\"\n        for i in @items\n          if (i.item + \"\").match filter\n            i.$el.removeClass 'ui-hide'\n          else\n            i.$el.addClass 'ui-hide'\n        undefined\n\n  resetItems: ->\n    item.remove() for item in @items\n    @items = []\n    @$el.empty()\n\n    if @list.length\n      @add(item) for item in @list\n      undefined\n    else if @scope.listEmpty and @template\n      @render()\n\n  add: (item)->\n    @items.push item = new @itemController(\n      template: @itemTemplate\n      parent: @\n      item: item\n      itemName: @itemName\n      index: @items.length\n    )\n    @$el.append item.render().$el","$ ->\n  $('[ui-neck]').each ->\n    el = $(@)\n    name = eval(el.attr('ui-neck'))\n    injector = Neck.DI[ if el.attr('neck-injector') then eval(el.attr('neck-injector')) else 'globals' ]\n    Controller = injector.load(name, type: 'controller')\n\n    el.removeAttr 'ui-neck'\n    controller = new Controller(el: el)\n    controller.injector = injector\n    controller.render()","class RouteHelper extends Neck.Helper\n  attributes: ['routeYield', 'routeReplace', 'routeParams', 'routeRefresh']\n\n  constructor: (opts)->\n    super \n    \n    opts.e.preventDefault()\n\n    container = @scope.routeYield or 'main'\n    \n    unless target = @scope._context._yieldList[container]\n      throw \"No yield '#{container}' for route in yields chain\"\n   \n    target.append @scope._main, @scope.routeParams, @scope.routeRefresh, @scope.routeReplace\n\nclass Neck.Helper.route\n  template: false\n  \n  constructor: (opts)->\n    opts.el.on 'click', (e)->\n      new RouteHelper _.extend opts, e: e","class Neck.Helper.show extends Neck.Helper\n\n  constructor: ->\n    super\n\n    @$el.addClass 'ui-hide'\n\n    @watch '_main', (value)->\n      if value\n        @$el.removeClass 'ui-hide'\n      else\n        @$el.addClass 'ui-hide'","class Neck.Helper.template extends Neck.Helper\n  template: true\n\n  constructor: ->\n    super\n\n    @scope._main = @template\n\n    # Clear element\n    @$el.addClass 'ui-hide'\n    setTimeout => @remove()\n      \n   \n    ","class Neck.Helper.value extends Neck.Helper\n\n  constructor: ->\n    super\n\n    @watch '_main', (value)->\n      @$el.text if value is undefined then \"\" else value","class Neck.Helper.yield extends Neck.Helper\n  attributes: ['yieldView', 'yieldParams', 'yieldReplace', 'yieldInherit']\n  template: true\n  replace: false\n\n  constructor: ->\n    super\n\n    # Properties\n    @name = @scope._main or \"main\"\n\n    # References\n    @context = @scope._context\n    @list = @context._yieldList or= {}\n\n    if @list[@name]\n      throw \"There is already yield with '#{@name}' name in App\"\n    else\n      @list[@name] = @\n\n    @listenTo @context, 'render:clear remove:after', =>\n      delete @list[@name]\n\n    @replace or= @scope.yieldReplace\n\n    if @scope.yieldView\n      @append @scope.yieldView, @scope.yieldParams\n\n  _createController: (controllerPath, params, parent)->\n    Controller = @injector.load(controllerPath, type: 'controller')\n    controller = new Controller template: \"#{controllerPath}\", params: params, parent: if @scope.yieldInherit then @context\n    controller.injector = @context.injector # Set injector from parent view controller\n    controller.scope._context = controller if @scope.yieldInherit\n    \n    # Inherit yields\n    controller._yieldList = Object.create @list\n    controller._yieldPath = controllerPath\n\n    # Set parent controller\n    parent._yieldChild = controller\n    parent.listenTo controller, \"remove:after\", -> @_yieldChild = undefined\n    controller.listenTo parent, \"remove:after\", -> controller.remove()\n\n    @$el.append controller.render().$el\n\n    controller\n\n  append: (controllerPath, params, refresh = false, replace = @replace)->\n    if replace and @_yieldChild\n      if controllerPath is @_yieldChild._yieldPath and not refresh\n        @_yieldChild._yieldChild?.remove()\n      else\n        @_yieldChild?.remove()\n        @_yieldChild = undefined\n\n    # Check if controller is already in yield\n    parent = @\n    child = undefined\n\n    while parent._yieldChild\n      child = parent._yieldChild\n      if child._yieldPath is controllerPath\n        if refresh\n          child.remove()\n          break\n        else\n          child._yieldChild?.remove()\n          child._yieldChild = undefined\n          return child\n\n      parent = parent._yieldChild\n  \n    @_createController controllerPath, params , parent\n\n  clear: ->\n    if @_yieldChild\n      @_yieldChild.remove()\n      @_yieldChild = undefined","// Closing wrapper\nreturn Neck; }));"]}