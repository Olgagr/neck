{"version":3,"file":"lib/neck.js","sources":["src/neck.coffee","src/helpers/attr.coffee","src/helpers/bind.coffee","src/helpers/class.coffee","src/helpers/collection.coffee","src/helpers/element.coffee","src/helpers/events.coffee","src/helpers/hide.coffee","src/helpers/init.coffee","src/helpers/list.coffee","src/helpers/neck.coffee","src/helpers/route.coffee","src/helpers/show.coffee","src/helpers/value.coffee","src/helpers/yield.coffee"],"names":[],"mappings":"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","sourcesContent":["window.Neck = Neck = {}\n\n# Add \"ui-hide\" class\n$('''\n  <style media=\"screen\">\n    .ui-hide { display: none !important }\n  </style>\n  ''').appendTo $('head')\n\nNeck.Tools =\n  dashToCamel: (str)-> str.replace /\\W+(.)/g, (x, chr)-> chr.toUpperCase()\n  camelToDash: (str)-> str.replace(/\\W+/g, '-').replace(/([a-z\\d])([A-Z])/g, '$1-$2')\n\nNeck.DI =\n  controllerPrefix: 'controllers'\n  helperPrefix: 'helpers'\n  templatePrefix: 'templates'\n\n  _routePath: /^([a-zA-Z$_\\.]+\\/?)+$/i\n\n  load: (route, options)-> \n    if route.match @_routePath\n      try\n        return require (if options.type then @[options.type + 'Prefix'] + \"/\" else '') + route\n      catch\n        if window[route]\n          return window[route]\n        else if options.type isnt 'template'\n          return throw \"No defined '#{route}' object for Neck dependency injection\"\n\n    route\n      \n\nclass Neck.Controller extends Backbone.View  \n  REGEXPS:\n    TEXTS: /\\'[^\\']+\\'/g\n    RESERVED_KEYWORDS: new RegExp \"\"\"\n      ^(do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|\n      void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|\n      return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|\n      function|arguments|interface|protected|implements|instanceof|undefined|window)($|\\.)\"\"\"\n    SCOPE_PROPERTIES: /([a-zA-Z$_\\@][^\\ \\[\\]\\:\\(\\)\\{\\}]*)/g\n    TWICE_SCOPE: /(scope\\.[^\\ ]*\\.)scope\\./\n    EXPRESSION: /[-+=\\(\\)\\{\\}\\:]+/\n    METHOD: /[a-zA-Z$_][^\\ \\(\\)\\{\\}\\:]*\\(/\n    OBJECT: /^\\{.+\\}$/g\n    ONLY_PROPERTY: /^[a-zA-Z$_][^\\ \\(\\)\\{\\}\\:]*$/g\n    SLASHES: /\\//g\n\n  divWrapper: true\n  template: false\n  \n  constructor: (opts)->\n    super\n\n    # Create scope inherit or new\n    scope = if @parent = opts?.parent then Object.create(@parent.scope) else _context: @\n    @scope = _.extend scope, @scope, _resolves: {}\n\n    # Listen to parent events\n    if @parent\n      @listenTo @parent, 'remove', @remove\n      @listenTo @parent, 'clear', @clear\n\n    @template = opts.template if opts.template\n\n    if @template is true\n      @template = @$el.html()\n      @$el.empty()\n\n    @params = opts.params or {}\n\n  remove: =>\n    @trigger 'remove'\n    super\n\n  clear: =>\n    @trigger 'clear'\n    @off()\n    @stopListening()\n\n  render: ->\n    @trigger 'clear' # Remove childs listings\n\n    if @template\n      if typeof (template = Neck.DI.load(@template, type: 'template')) is 'function'\n        template = template @scope\n    \n      if @divWrapper\n        @$el.html template\n      else\n        @setElement $(template)\n    \n    for el in @$el\n      @_parseNode el \n\n    @\n\n  _parseNode: (node)->\n    if node?.attributes\n      el = null\n      for attribute in node.attributes\n        if attribute.nodeName?.substr(0, 3) is \"ui-\"\n          el or= $(node)\n          name = Neck.Tools.dashToCamel attribute.nodeName.substr(3)\n          helper = new (Neck.Helper[name] or Neck.DI.load(name, type: 'helper'))(el: el, parent: @, mainAttr: attribute.value)\n          stop = true if helper.template isnt false\n    \n    @_parseNode child for child in node.childNodes unless stop or not node\n    undefined\n\n  _parseValue: (s)->\n    s = s.trim()\n    texts = []\n    resolves = []\n\n    # Replace texts for recognition\n    s = s.replace @REGEXPS.TEXTS, (t)-> \n      texts.push t\n      \"###\"\n\n    # Find scope properties\n    s = s.replace @REGEXPS.SCOPE_PROPERTIES, (t)=>\n      unless t.match @REGEXPS.RESERVED_KEYWORDS\n        unless t.substr(0, 1) is '@'\n          resolves.push t.split('.')[0]\n        else\n          t = '_context.' + t.substr(1)\n        \"scope.#{t}\"\n      else\n        t\n\n    # Clear twice 'scope'\n    while s.match @REGEXPS.TWICE_SCOPE\n      s = s.replace @REGEXPS.TWICE_SCOPE, \"$1\"\n \n    # Unreplace texts\n    if texts.length\n      s = s.replace(/###/g, ()-> texts.shift()) \n\n     # Add brackets when string is object instance\n    if s.match @REGEXPS.OBJECT\n      s = \"(#{s})\"\n\n    [s, _.uniq resolves]\n\n  _setAccessor: (key, value, controller = @parent)->\n    scope = controller.scope\n    [value, resolves] = @_parseValue value\n\n    options = enumerable: true, get: -> \n      try\n        eval value\n      catch e\n        undefined\n\n    if value.match @REGEXPS.ONLY_PROPERTY\n      options.set = (newVal)=>\n        model = value.split('.')\n        property = model.pop()\n        \n        # # Create objects when they are undefined\n        obj = scope\n        for m in model.slice(1)\n          obj = obj[m] = {} unless obj[m]\n\n        try\n          (eval model.join('.'))[property] = newVal\n          @apply key if model.length > 1\n        catch e\n          undefined\n    \n    Object.defineProperty @scope, key, options\n\n    if controller isnt @\n      @scope._resolves[key] = []\n      for resolve in resolves\n        if controller.scope._resolves[resolve]\n          @scope._resolves[key] = _.union @scope._resolves[key], controller.scope._resolves[resolve]\n        else\n          @scope._resolves[key].push { controller: controller, key: resolve }\n      # Clear when empty\n      unless @scope._resolves[key].length\n        delete @scope._resolves[key]\n\n  _watch: (key, callback, context = @)->\n    if @scope.hasOwnProperty(key) or !@parent\n      if Object.getOwnPropertyDescriptor(@scope, key)?.get\n        if @scope._resolves[key]\n          for resolve in @scope._resolves[key]\n            resolve.controller._watch resolve.key, callback, context\n          undefined\n        else\n          context.listenTo @, \"refresh:#{key}\", callback\n      else\n        val = @scope[key]\n\n        if val instanceof Backbone.Model\n          @listenTo val, \"sync\", => @apply key\n\n        Object.defineProperty @scope, key, \n          enumerable: true\n          get: -> val\n          set: (newVal)=>\n            if val instanceof Backbone.Model\n              @stopListening val\n            if newVal instanceof Backbone.Model  \n              @listenTo newVal, \"sync\", => @apply key\n              \n            val = newVal\n            @apply key\n      \n        context.listenTo @, \"refresh:#{key}\", callback\n    else\n      controller = @\n      while controller = controller.parent\n        if controller.scope.hasOwnProperty key\n          controller._watch key, callback, context\n          break\n\n  watch: (keys..., callback)->\n    call = => callback.apply @, _.map keys, (k)=> @scope[k]\n    @_watch key.split('.')[0], call for key in keys\n    call()\n\n  apply: (key)->\n    if @scope._resolves[key]\n      for resolve in @scope._resolves[key]\n        resolve.controller.trigger \"refresh:#{resolve.key}\"\n    else\n      @trigger \"refresh:#{key}\"\n\nclass Neck.Helper extends Neck.Controller\n\n  constructor: (opts)->\n    super\n    @_setAccessor '_main', opts.mainAttr\n\n    if @attributes\n      for attr in @attributes\n        if value = @el.attributes[Neck.Tools.camelToDash(attr)]?.value\n          @_setAccessor attr, value","class Neck.Helper.attr extends Neck.Helper\n\n  constructor: ->\n    super\n    throw \"'ui-attr' attribute has to be object\" unless typeof @scope._main is 'object'\n\n    @watch '_main', (main)->\n      for key, value of main\n        if returnedValue = value\n          @$el.attr key, if returnedValue is true then key else returnedValue\n        else\n          @$el.removeAttr key\n      undefined","class Neck.Helper.bind extends Neck.Helper\n\n  NUMBER: /^[0-9]+((\\.|\\,)?[0-9]+)*$/\n\n  events:\n    \"keydown\" : \"update\"\n    \"change\"  : \"update\"\n    \"search\"  : \"update\"\n\n  isCheckbox: false\n\n  constructor: ->\n    super\n\n    if @$el.is(':checkbox')\n      @isCheckbox = true\n\n    @watch '_main', (value)->\n      unless @_updated\n        if @isCheckbox\n          @$el.prop 'checked', value\n        else\n          @$el.val value or ''\n      @_updated = false\n\n  calculateValue: (s)->\n    if s.match @NUMBER\n      Number s.replace(',','.')\n    else\n      s\n\n  update: ->\n    setTimeout =>\n      @_updated = true\n      if @isCheckbox\n        @scope._main = if @$el.is(':checked') then 1 else 0\n      else\n        @scope._main = @calculateValue @$el.val()","class Neck.Helper.class extends Neck.Helper\n\n  constructor: ->\n    super\n    throw \"'ui-class' attribute has to be object\" unless typeof @scope._main is 'object'\n\n    @watch '_main', (main)->\n      for key, value of main\n        if value\n          @$el.addClass key\n        else\n          @$el.removeClass key\n      undefined","class Neck.Helper.collection extends Neck.Helper\n  attributes: ['collectionItem', 'collectionSort', 'collectionFilter', 'collectionView']\n  template: true\n\n  constructor: ->\n    super\n\n    unless @scope._main instanceof Backbone.Collection\n      return new Error \"Given object has to be instance of Backbone.Collection\"\n\n    @template = @scope.collectionView if @scope.collectionView\n    @scope.collectionItem or= 'item'\n    @items = []\n    \n    @watch '_main', (collection)->\n      unless collection is @collection\n        @stopListening @collection if @collection\n        @collection = collection\n        @listenTo @collection, \"add\", @addItem\n        @listenTo @collection, \"remove\", @removeItem\n        @listenTo @collection, \"sort\", @sortItems\n        @listenTo @collection, \"reset\", @resetItems\n\n        @resetItems()\n\n    @watch 'collectionSort', (sort)->\n      if sort\n        @collection.comparator = sort\n        @collection.sort()\n\n    @watch 'collectionFilter', (filter)->\n     if filter or filter is \"\"\n      filter = new RegExp filter, \"gi\"\n      for item in @items\n        if (item.model + \"\").match filter\n          item.$el.removeClass 'ui-hide'\n        else\n          item.$el.addClass 'ui-hide'\n      undefined\n\n  addItem: (model)=>\n    @items.push item = new Item(\n      template: @template\n      parent: @parent\n      model: model\n      itemName: @scope.collectionItem\n      index: @items.length\n    )\n    @$el.append item.render().$el\n\n  removeItem: (model)=>\n    _.findWhere(@items, model: model).remove()\n\n  sortItems: =>\n    for model in @collection.models\n      _.findWhere(@items, model: model).$el.appendTo @$el\n    undefined\n\n  resetItems: =>\n    item.remove() for item in @items\n    @items = []\n\n    @addItem(item) for item in @collection.models\n    undefined\n\n\nclass Item extends Neck.Controller\n  divWrapper: false\n\n  constructor: (opts)->\n    super\n    \n    # Set own property\n    Object.defineProperty @scope, opts.itemName,\n      enumerable: true\n      writable: true\n      configurable: true\n      value: opts.model\n\n    # For iterating number in view\n    @scope._index = opts.index\n    \n    unless @templateBody\n      @listenTo @scope[opts.itemName], 'change', => \n        @$el.replaceWith @render().$el","class Neck.Helper.element extends Neck.Helper\n\n  constructor: ->\n    super\n    throw \"'ui-element' attribute has to be string\" unless typeof @scope._main is 'string'\n\n    @parent?.scope[@scope._main] = @$el","### LIST OF EVENTS TO TRIGGER ###\n\nEventList = [\n  # Mouse events\n  \"click\", \"dblclick\"\n  \"mouseenter\", \"mouseleave\", \"mouseout\"\n  \"mouseover\", \"mousedown\", \"mouseup\"\n  \"drag\", \"dragstart\", \"dragenter\", \"dragleave\", \"dragover\", \"dragend\", \"drop\"\n  # General\n  \"load\"\n  \"focus\", \"focusin\", \"focusout\", \"select\", \"blur\"\n  \"submit\"\n  \"scroll\"\n  # Touch events\n  \"touchstart\", \"touchend\", \"touchmove\", \"touchenter\", \"touchleave\", \"touchcancel\"\n  # Keys events\n  \"keyup\", \"keydown\", \"keypress\"\n]\n\nclass EventHelper extends Neck.Helper\n  constructor: (opts)->\n    super\n    \n    setTimeout =>\n      if typeof @scope._main is 'function'\n        @scope._main.call @scope._context, opts.e\n\n      @off()\n      @stopListening()\n\nclass Event\n  constructor: (options)->\n    options.el.on @eventType, (e)=>\n      e.preventDefault()\n      options.e = e\n      new EventHelper options\n\nfor ev in EventList\n  helper = class ER extends Event\n  helper::eventType = ev\n  Neck.Helper[Neck.Tools.dashToCamel(\"event-#{ev}\")] = helper","class Neck.Helper.hide extends Neck.Helper\n\n  constructor: ->\n    super\n\n    @watch '_main', (value)->\n      if value\n        @$el.addClass 'ui-hide'\n      else\n        @$el.removeClass 'ui-hide'","class Neck.Helper.init extends Neck.Helper\n\n  constructor: ->\n    super\n\n    @watch '_main', (main)->\n      if typeof @scope._main is 'function'\n        @scope._main.call @scope._context","class Neck.Helper.list extends Neck.Helper\n  attributes: ['listItem', 'listSort', 'listFilter', 'listView']\n  template: true\n\n  constructor: ->\n    super\n\n    unless @scope._main instanceof Array\n      return new Error \"Given object has to be instance of Array\"\n\n    @template = @scope.listView if @scope.listView\n    @itemName or= 'item'\n    @items = []\n\n    @watch '_main', (list)->\n      @trigger 'remove'\n      @add(item) for item in @list\n      undefined\n        \n\n    @watch 'listSort', (sort)->\n      if sort\n        @list = _.sortBy @list, (i)-> sort(i.item)\n\n    @watch 'listFilter', (filter)->\n     if filter or filter is \"\"\n      filter = new RegExp filter, \"gi\"\n      for i in @items\n        if (i.item + \"\").match filter\n          i.$el.removeClass 'ui-hide'\n        else\n          i.$el.addClass 'ui-hide'\n      undefined\n\n  add: (item)->\n    @items.push item = new Item(\n      template: @template\n      parent: @\n      item: item\n      itemName: @itemName\n      index: @items.length\n    )\n    @$el.append item.render().$el\n\n  sort: ->\n    for item in @list\n      _.findWhere(@items, item: item).$el.appendTo @$el\n    undefined\n\nclass Item extends Neck.Controller\n  divWrapper: false\n\n  constructor: (opts)->\n    super\n    \n    # Set own property\n    Object.defineProperty @scope, opts.itemName,\n      enumerable: true\n      writable: true\n      configurable: true\n      value: opts.item\n\n    # For iterating number in view\n    @scope._index = opts.index","$ ->\n  $('[ui-neck]').each ->\n    el = $(@)\n    name = eval(el.attr('ui-neck'))\n    Controller = Neck.DI.load(name, type: 'controller')\n\n    el.removeAttr 'ui-neck'\n    (new Controller(el: el)).render()","class RouteHelper extends Neck.Helper\n  attributes: ['routeYield', 'routeReplace', 'routeParams', 'routeRefresh']\n\n  constructor: (opts)->\n    super \n    \n    opts.e.preventDefault()\n\n    container = @scope.routeYield or 'main'\n    \n    unless target = @scope._context._yieldList[container]\n      throw new Error \"No yield '#{container}' for route in yields chain\"\n   \n    target.append @scope._main, @scope.routeParams, @scope.routeRefresh, @scope.routeReplace\n\nclass Neck.Helper.route\n\n  constructor: (opts)->\n    opts.el.on 'click', (e)->\n      new RouteHelper _.extend opts, e: e","class Neck.Helper.show extends Neck.Helper\n\n  constructor: ->\n    super\n\n    @$el.addClass 'ui-hide'\n\n    @watch '_main', (value)->\n      if value\n        @$el.removeClass 'ui-hide'\n      else\n        @$el.addClass 'ui-hide'","class Neck.Helper.value extends Neck.Helper\n\n  constructor: ->\n    super\n\n    @watch '_main', (value)->\n      @$el.text value","class Neck.Helper.yield extends Neck.Helper\n  attributes: ['yieldView']\n  template: true\n\n  constructor: ->\n    super\n\n    # Properties\n    @name = @scope._main or \"main\"\n\n    # References\n    @context = @scope._context\n    @list = @context._yieldList or= {}\n\n    if @list[@name]\n      throw new Error \"There is already yield with '#{@name}' name in App\"\n    else\n      @list[@name] = @\n\n    @listenTo @context, 'clear remove', =>\n      delete @list[@name]\n\n    if @scope.yieldView\n      @append @scope.yieldView\n\n  _createController: (controllerPath, params, parent)->\n    Controller = Neck.DI.load(controllerPath, type: 'controller')\n    controller = new Controller template: \"#{controllerPath}\", params: params\n    \n    # Inherit yields\n    controller._yieldList = Object.create @list\n    controller._yieldPath = controllerPath\n\n    # Set parent controller\n    parent._yieldChild = controller\n    parent.listenTo controller, \"remove\", -> @_yieldChild = undefined\n    controller.listenTo parent, \"remove\", -> controller.remove()\n\n    @$el.append controller.render().$el\n\n    controller\n\n  append: (controllerPath, params, refresh = false, replace = false)->\n    if replace and @_yieldChild\n      if controllerPath is @_yieldChild._yieldPath and not refresh\n        @_yieldChild._yieldChild?.remove()\n      else\n        @_yieldChild?.remove()\n        @_yieldChild = undefined\n\n    # Check if controller is already in yield\n    parent = @\n    child = undefined\n\n    while parent._yieldChild\n      child = parent._yieldChild\n      if child._yieldPath is controllerPath\n        if refresh\n          child.remove()\n          break\n        else\n          child._yieldChild?.remove()\n          child._yieldChild = undefined\n          return child\n\n      parent = parent._yieldChild\n  \n    @_createController controllerPath, params, parent"]}